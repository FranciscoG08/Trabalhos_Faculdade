#Conversao para graficos e atualizacoes em 15 min
- trigger:
    - platform: time_pattern
      minutes: "/15"
  sensor:
    - name: "Consumo da Casa em kW (15min)"
      unit_of_measurement: "kW"
      device_class: power
      state_class: measurement
      state: >
        {{ (states('sensor.consumo_da_casa_novo') | float(0) / 1000) | round(2) }}

    - name: "Produção Solar em kW (15min)"
      unit_of_measurement: "kW"
      device_class: power
      state_class: measurement
      state: >
        {{ (states('sensor.solar_total') | float(0) / 1000) | round(2) }}

    - name: "EV16 Power em kW (15min)"
      unit_of_measurement: "kW"
      device_class: power
      state_class: measurement
      state: >
        {{ (states('sensor.ev_16a_power') | float(0) / 1000) | round(2) }}

    - name: "EV32 Power em kW (15min)"
      unit_of_measurement: "kW"
      device_class: power
      state_class: measurement
      state: >
        {{ (states('sensor.ev_32a_power') | float(0) / 1000) | round(2) }}
